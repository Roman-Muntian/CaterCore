{% load i18n %}
<div class="flex justify-between items-center p-4 border-b">
    <h2 class="text-xl font-bold">{% trans "Ваш кошик" %} ({{ cart.total_items }})</h2>
    <button @click="open = false" class="text-2xl">&times;</button>
</div>

<div class="flex-grow overflow-y-auto p-4 space-y-4">
    {% for item in cart.items.all %}
    <div class="flex items-center space-x-4">
        <img src="{{ item.dish.image.url|default:'/static/placeholder.jpg' }}" class="w-16 h-16 object-cover rounded">
        <div class="flex-grow">
            <h4 class="font-semibold">{{ item.dish.name }}</h4>
            <p class="text-sm text-gray-600">{{ item.quantity }} x {{ item.dish.price }} zł</p>
        </div>
        <div>
            <p class="font-bold">{{ item.total_price }} zł</p>
            <button 
                hx-post="{% url 'cart:cart_remove' item.id %}"
                hx-target="#cart-content"
                hx-swap="innerHTML"
                hx-on::after-request="htmx.trigger('body', 'update-cart-icon')"
                class="text-red-500 hover:underline text-sm">
                {% trans "Видалити" %}
            </button>
        </div>
    </div>
    {% empty %}
    <p class="text-center text-gray-600 py-8">{% trans "Ваш кошик порожній" %}</p>
    {% endfor %}
</div>

<div class="p-4 border-t mt-auto">
    <div class="flex justify-between text-lg font-bold mb-4">
        <span>{% trans "Всього" %}:</span>
        <span>{{ cart.total_price }} zł</span>
    </div>
    {% if cart.total_items > 0 %}
    <a href="{% url 'orders:checkout' %}" 
       hx-get="{% url 'orders:checkout' %}"
       hx-target="#main-content"
       hx-push-url="true"
       @click="open = false"
       class="block w-full bg-green-500 text-white text-center py-3 px-6 rounded font-semibold hover:bg-green-600">
       {% trans "Оформити замовлення" %}
    </a>
    {% endif %}
</div>