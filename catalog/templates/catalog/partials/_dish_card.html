{% load i18n %}
<div class="bg-white rounded-lg shadow-lg overflow-hidden flex flex-col">
    <a href="{{ dish.get_absolute_url }}" 
       hx-get="{{ dish.get_absolute_url }}"
       hx-target="#main-content"
       hx-push-url="true"
       hx-indicator="#loading-spinner">
        <img src="{{ dish.image.url|default:'/static/placeholder.jpg' }}" alt="{{ dish.name }}" class="w-full h-48 object-cover">
    </a>
    
    <div class="p-4 flex flex-col flex-grow">
        <h3 class="text-lg font-semibold mb-2">
            <a href="{{ dish.get_absolute_url }}"
               hx-get="{{ dish.get_absolute_url }}"
               hx-target="#main-content"
               hx-push-url="true"
               hx-indicator="#loading-spinner">
               {{ dish.name }}
            </a>
        </h3>
        <p class="text-sm text-gray-600 mb-4 flex-grow">{{ dish.description|truncatewords:20 }}</p>
        
        <div class="flex justify-between items-center mt-auto">
            <span class="text-xl font-bold text-blue-600">{{ dish.price }} zł</span>
            
            <button 
                hx-post="{% url 'cart:cart_add' dish.id %}"
                hx-target="#modal-container"
                hx-swap="innerHTML"
                hx-on::after-request="htmx.trigger('body', 'update-cart-icon')"
                class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded transition duration-200">
                {% trans "В кошик" %}
            </button>
        </div>
    </div>
</div>